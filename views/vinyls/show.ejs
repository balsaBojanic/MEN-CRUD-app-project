<%- include('../partials/head') %>
<body>
    <%- include('../partials/header') %>

    <section id="recordssection">
        <div style="max-width: 800px; margin: 0 auto; background-color: rgba(189, 189, 189, 0.9); padding: 40px; border-radius: 20px;">
            <div style="display: flex; gap: 40px; align-items: flex-start;">
                <div style="flex: 1;">
                    <img src="<%= vinyl.imageURL || '/default-vinyl.jpg' %>" alt="<%= vinyl.title %>" style="width: 100%; border-radius: 10px;">
                </div>
                <div style="flex: 2;">
                    <h1 style="color: #900020; font-size: 48px; margin-bottom: 10px;"><%= vinyl.title %></h1>
                    <h2 style="color: #2d2d2d; font-size: 32px; margin-bottom: 20px;">by <%= vinyl.artist %></h2>
                    
                    <div style="margin-bottom: 20px;">
                        <p style="font-size: 20px; margin: 5px 0;"><strong>Genre:</strong> <%= vinyl.genre %></p>
                        <p style="font-size: 20px; margin: 5px 0;"><strong>Condition:</strong> <%= vinyl.condition %></p>
                        <p style="font-size: 24px; margin: 10px 0; color: #900020;"><strong>Price:</strong> $<%= vinyl.price %></p>
                        <p style="font-size: 18px; margin: 5px 0;"><strong>Seller:</strong> <%= vinyl.seller %></p>
                    </div>

                    <% if (user) { %>
                        <% if (user.role === 'buyer') { %>
                            <form action="/cart/<%= vinyl._id %>" method="POST">
                                <button type="submit" style="background-color: #900020; color: white; border: none; padding: 12px 24px; border-radius: 5px; font-size: 18px; cursor: pointer;">Add to Cart</button>
                            </form>
                        <% } else if (user.role === 'seller' && user._id.toString() === vinyl.sellerId.toString()) { %>
                            <div style="margin-top: 20px;">
                                <a href="/vinyls/<%= vinyl._id %>/edit" style="background-color: #900020; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-right: 10px;">Edit</a>
                                <form action="/vinyls/<%= vinyl._id %>?_method=DELETE" method="POST" style="display: inline;">
                                    <button type="submit" style="background-color: #2d2d2d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Delete</button>
                                </form>
                            </div>
                        <% } %>
                    <% } %>
                </div>
            </div>
        </div>
    </section>

    <%- include('../partials/footer') %>
</body>
</html>